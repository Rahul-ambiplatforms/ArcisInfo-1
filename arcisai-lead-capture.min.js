/**
 * ArcisAI Sales Agent - Auto Lead Capture Script
 * Version: 1.1.0
 *
 * INSTALLATION:
 * Add this single line to your public/index.html before </body>:
 *   <script src="/arcisai-lead-capture.min.js"></script>
 *
 * All forms on your site will automatically send leads
 * to the ArcisAI Sales Agent. No other code changes needed.
 */
!function(){"use strict";var e="http://139.59.28.88:8000/api/v1/leads",t="default-api-key",n=["name","full_name","fullname","full-name","contact_name","your-name","your_name","fname","first_name","firstname"],a=["email","email_address","emailaddress","your-email","your_email","mail","e-mail"],o=["phone","phone_number","phonenumber","your-phone","your_phone","tel","telephone","mobile","cell"],r=["company","company_name","companyname","organization","org","organisation","business"],i=["message","msg","comments","comment","inquiry","enquiry","description","your-message","your_message","requirements","details"],s=["product","product_interest","products","interest","service","category"],c=["country","location","region","city","state"];function l(e,t){for(var n=0;n<t.length;n++){var a=e.get(t[n]);if(a&&a.trim())return a.trim()}return""}function d(){var e=window.location.href.toLowerCase(),t=document.referrer.toLowerCase();return e.indexOf("utm_source=google")>-1||t.indexOf("google.com")>-1?"google_ads":e.indexOf("utm_source=linkedin")>-1||t.indexOf("linkedin.com")>-1?"linkedin":e.indexOf("utm_source=facebook")>-1||t.indexOf("facebook.com")>-1?"facebook":e.indexOf("/demo")>-1?"demo_request":e.indexOf("/partner")>-1?"partner_inquiry":e.indexOf("/contact")>-1?"website_contact":"website"}function u(){document.querySelectorAll("form").forEach(function(f){if(!f.dataset.arcisaiHooked){f.dataset.arcisaiHooked="true";f.addEventListener("submit",function(){try{var g=new FormData(f),h=l(g,n),m=l(g,a);if(!h&&!m)return;var p={name:h||"Website Visitor",email:m,phone:l(g,o),company:l(g,r),source:d(),notes:l(g,i),metadata:{submitted_at:new Date().toISOString(),page_url:window.location.href,referrer:document.referrer,form_id:f.id||"",product_interest:l(g,s),country:l(g,c)}};if(navigator.sendBeacon){var b=new Blob([JSON.stringify(p)],{type:"application/json"});navigator.sendBeacon(e+"?api_key="+t,b)}else{fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":t},body:JSON.stringify(p),keepalive:true}).catch(function(){})}}catch(x){console.warn("[ArcisAI]",x.message)}})}})}if("loading"===document.readyState)document.addEventListener("DOMContentLoaded",u);else u();new MutationObserver(function(e){for(var t=0;t<e.length;t++)if(e[t].addedNodes.length){u();break}}).observe(document.body||document.documentElement,{childList:true,subtree:true});console.log("[ArcisAI] Lead capture v1.1 initialized")}();
